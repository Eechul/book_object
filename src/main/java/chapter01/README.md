# Chator01 - 객체, 설계

1. 티켓 판매 애플리케이션 구현하기
   * [예제코드](https://github.com/Eechul/book_object/tree/main/src/main/java/chapter01/ticket)
2. 무엇이 문제인가
   * 예상을 빗나간다
      * 소극장(Theater)이 관객(Audience), 가방(Bag), 매표소(TicketOffice), 판매원(TicketSeller) 등을 모두 제어하고 있다.
      * 소극장이 관객의 가방에 돈을 빼기도 하고, 판매원에게 티켓을 가져오기도 하고, 관객의 가방에 티켓을 넣어주기 까지 한다.
      * 자연스럽지 않다
   * 변경에 취약하다
      * 관객과 판매원을 변경하면 소극장도 변경해야 한다
      * 소극장은 관객, 판매원, 매표소, 가방 같이 의존하는 객체가 많다. 의존하는 객체가 많아지면 변경도 잦아진다. -> '**결합도(coupling)** 가 높다' 라 표현한다. 
      * 최소한의 의존성을 유지하고 불필요한 것은 제거해야 한다.
3. 설계 개선하기
    * 정확하지 않은 의도가 소극장 객체 코드에서 드러났다. 소극장이 다른 객체들에게 많은 개입을 하고있다. 관객과 판매원에 대해 알지 못하도록 설계를 개선할 필요가 있다.
    * 자율성을 높이자
      * 소극장 객체의 enter 메서드는 '다른 객체들에게 많은 개입을 하고있다'의 증거가 된다.
      * 첫번째로 판매원만이 매표소를 관리 할 수 있게 자율성을 주자
        * TicketSeller(판매원)에 sellTo 메서드 추가하여 Theater(소극장)의 enter 메서드 간소화
        * 이렇게 되면 TicketSeller getTicketOffice 메서드는 제거된다.
        * 자연스래 객체 내부의 세부적인 사항을 감추는 '**캡슐화(encapsulation)**'가 이루어진다. -> 캡슐화는 객체간에 결합도를 낮춘다 -> 변경이 용이한 코드가 된다 
        * 이제 Theater 객체의 enter 메서드는 판매원과 관객만을 의존하므로 설계가 아주 간략해졌다.
      * 두번째로 판매원과 관객을 분리시켜 관객에게 자율성을 주자.
        * 판매원의 sellTo 메서드는 여전히 가방에 접근하고 있어 관객과 가방에 대한 자유도를 떨어트리고 있다.
        * 개선된 관객 객체 코드는 다른 외부 객체가 가방에 대한 존재여부를 알 필요가 없다. 오직 관객만이 가방에 대해 알고 있다.
        * 이를 통해 판매원 sellTo 메서드의 코드는 더욱 더 간략화된다.
    * 무엇이 개선됐는가
      * 소극장과 판매원, 판매원과 고객, 가방을 캡슐화하니 결합도가 낮아져 변경이 용이한 코드가 됐다.
    * 어떻게 한 것인가
      * 판매자의 역할과 고객의 역할을 분리하여 소극장 객체에서 다른 객체의 의존성을 줄였다. 판매자가 할 수 있는 행동, 고객이 할 수 있는 행동을 분리했다.  
    * 캡슐화와 응집도
      * 캡슐화로 인해 소극장은 판매원과 고객의 내부 상태를 알 필요가 없어졌다. 대신, 연관된 작업만을 수행하고 연관성 없는 작업은 다른 객체에게 위임하므로써 **응집도(cohesion)** 가 높아졌다.

    
    
 
